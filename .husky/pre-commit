#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Ejecutar tests solo para archivos modificados
echo "ğŸ§ª Running affected tests..."
mvn test -Dtest=$(git diff --cached --name-only --diff-filter=ACMR | grep 'Test\.java$' | sed 's|src/test/java/||g' | sed 's|\.java||g' | tr '/' '.' | tr '\n' ',')

if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Commit aborted."
  exit 1
fi

echo "âœ… All tests passed!"
